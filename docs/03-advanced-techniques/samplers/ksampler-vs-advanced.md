[🏠 홈](../../../README.md) | [📚 전체 목차](../../../README.md#-전체-문서-목차)

---

# KSampler vs SamplerCustomAdvanced

> 기본 샘플러와 고급 샘플러의 차이점과 활용법

[🏠 홈](../../../README.md) | [📚 전체 목차](../../../docs/README.md)

---

## 🎯 가이드 개요

**대상 독자:** 더 정밀한 노이즈 제어가 필요한 고급 사용자
**사전 이해:** KSampler 사용법, Denoising Step 개념
**예상 소요 시간:** 10분

**핵심 내용:**
- 일반 KSampler와 Advanced 버전의 결정적 차이 (노이즈 주입 제어)
- `add_noise` 옵션과 `start_at_step`을 활용한 고급 기법
- Refiner 모델(SDXL Refiner 등)을 사용할 때 필수적인 설정법

---

## 📑 목차

1. [KSampler (기본 샘플러)](#1-ksampler-기본-샘플러)
2. [SamplerCustomAdvanced (고급 샘플러)](#2-samplercustomadvanced-고급-샘플러)
3. [주요 차이점 비교](#3-주요-차이점-비교)
4. [Sigma Input 이해](#4-sigma-input-이해)
5. [실전 활용 가이드](#5-실전-활용-가이드)

---

## 1. KSampler (기본 샘플러)

### 🎯 개요

**KSampler = 일반적인 Stable Diffusion 이미지 생성용 표준 샘플러**

대부분의 워크플로우에서 사용하는 기본 노드입니다.

### 📊 주요 기능

| 파라미터 | 설명 | 범위 | 기본값 |
|----------|------|------|--------|
| **seed** | 랜덤 시드 | 0 ~ 2³² | 랜덤 |
| **steps** | 샘플링 스텝 수 | 1 ~ 150 | 20 |
| **cfg** | CFG Scale | 1.0 ~ 30.0 | 7.0 |
| **sampler_name** | 샘플링 방법 | Euler, DPM++, 등 | Euler |
| **scheduler** | 스케줄링 방식 | normal, karras, 등 | normal |
| **denoise** | 디노이즈 강도 | 0.0 ~ 1.0 | 1.0 |

### 💡 샘플링 방법

**사전 정의된 옵션:**

| 샘플러 | 특징 | 권장 용도 |
|--------|------|-----------|
| **Euler** | 빠르고 단순 | 일반적인 생성 |
| **Euler a** | 창의적, 다양성 | 실험적 생성 |
| **DPM++ 2M** | 고품질 | 디테일 중시 |
| **DPM++ SDE** | 정밀 | 정확한 복제 |
| **LMS** | 레거시 | 호환성 |
| **Heun** | 안정적 | 안정성 우선 |
| **DDIM** | 결정적 | 재현성 필요 |

### 🔄 스케줄링 옵션

**노이즈 감소 방식:**

| Scheduler | 설명 | 특징 |
|-----------|------|------|
| **normal** | 선형 감소 | 균일한 스텝 |
| **karras** | 비선형 감소 | 초반 빠르게, 후반 정밀 |
| **exponential** | 지수 감소 | 부드러운 전환 |
| **simple** | 단순화 | Flux 기본값 |

### ✅ 사용 사례

```
✅ 대부분의 일반적인 text-to-image 생성
✅ 빠르고 간단한 설정이 필요한 경우
✅ 표준 워크플로우
```

---

## 2. SamplerCustomAdvanced (고급 샘플러)

### 🎯 개요

**SamplerCustomAdvanced = 더 세밀한 제어가 필요한 고급 사용자용 샘플러**

연구 목적이나 실험적인 이미지 생성에 사용합니다.

### 📊 추가 파라미터

| 파라미터 | 설명 | 의미 |
|----------|------|------|
| **sigma_min** | 최소 노이즈 값 | 노이즈의 하한선 |
| **sigma_max** | 최대 노이즈 값 | 노이즈의 상한선 |
| **rho** | 스케줄링 곡률 | Karras 스케줄링 조정 |
| **sigma (input)** | 외부 시그마 입력 | 커스텀 스케줄링 |

### 💡 고급 기능

**1. 노이즈 범위 직접 지정**

```
sigma_min = 0.1  (최소 노이즈)
sigma_max = 10.0 (최대 노이즈)

노이즈가 10.0에서 0.1로 감소
```

**2. Rho 조정**

```
rho = 7.0  (Karras 기본값)

값이 클수록: 초기 스텝 더 큼
값이 작을수록: 균일한 스텝
```

**3. 커스텀 SDE 솔버**

```
Stochastic Differential Equation 기반
확산 모델링 연구용
```

### ✅ 사용 사례

```
✅ 연구 목적이나 실험적인 이미지 생성
✅ 특정 노이즈 프로파일 테스트
✅ 고품질 결과를 위한 정확한 노이즈 제어
✅ 논문 재현 또는 커스텀 알고리즘
```

---

## 3. 주요 차이점 비교

### 📊 종합 비교표

| 특성 | KSampler | SamplerCustomAdvanced |
|------|----------|----------------------|
| **사용 편의성** | ⭐⭐⭐⭐⭐ 간단하고 직관적 | ⭐⭐ 복잡하고 고급 설정 필요 |
| **파라미터 제어** | 기본적인 옵션만 노출 | 세부적인 파라미터 조정 가능 |
| **노이즈 스케줄링** | 사전 정의된 옵션 사용 | 커스텀 스케줄링 직접 설정 |
| **학습 곡선** | ⭐ 낮음 | ⭐⭐⭐⭐ 높음 |
| **호환성** | 일반적인 워크플로우 | 실험적/연구용 워크플로우 |
| **속도** | 빠름 | 동일 (설정에 따라 다름) |
| **결과 품질** | 우수 | 최적화 시 더 우수 |

### 💡 선택 가이드

**KSampler를 사용하세요:**
```
✅ 일반적인 이미지 생성
✅ 빠른 테스트와 반복
✅ 표준 워크플로우
✅ 초보자 ~ 중급자
```

**SamplerCustomAdvanced를 사용하세요:**
```
✅ 연구 목적
✅ 노이즈 제어 실험
✅ 논문 알고리즘 재현
✅ 최고 품질 추구
✅ 고급 사용자
```

---

## 4. Sigma Input 이해

### 🎯 Sigma란?

**Sigma (σ) = 노이즈의 표준편차**

각 타임스텝에서 노이즈의 강도를 나타냅니다.

### 📊 Sigma 값의 의미

| Sigma 값 | 노이즈 강도 | 이미지 상태 |
|----------|------------|-------------|
| **σ = 10.0** | 매우 강함 | 완전 노이즈 |
| **σ = 5.0** | 강함 | 많은 노이즈 |
| **σ = 1.0** | 보통 | 중간 형태 |
| **σ = 0.1** | 약함 | 거의 완성 |
| **σ = 0.0** | 없음 | 깨끗한 이미지 |

### 🔄 Sigma 제어 방식

#### 1️⃣ 고정된 시그마 범위 지정

```
sigma_min = 0.1
sigma_max = 10.0
rho = 7.0

자동으로 0.1 ~ 10.0 사이 스케줄 생성
```

#### 2️⃣ 외부 입력으로 시그마 전달

```
외부 노드 → Sigma Sequence 생성
    ↓
SamplerCustomAdvanced의 sigma 입력
    ↓
동적 제어 가능
```

### 💡 Sigma Input 활용 사례

**1. 커스텀 노이즈 스케줄링**

```python
# 초기 스텝: 빠르게 노이즈 제거
# 후기 스텝: 세밀하게 조정

sigmas = [10.0, 8.0, 5.0, 3.0, 1.5, 0.8, 0.4, 0.1]
```

**2. 실험적 기법 테스트**

```
논문에서 제안된 특수 스케줄링 재현
예: SDE 솔버, 비선형 감소 등
```

**3. 노이즈 제어를 통한 화질 향상**

```
고주파 노이즈: 빠르게 제거
저주파 노이즈: 천천히 제거
→ 디테일 보존
```

---

## 5. 실전 활용 가이드

### 🎯 시나리오별 권장 설정

#### Scenario 1: 일반 Text-to-Image

**노드:** KSampler  
**설정:**
```
sampler: Euler
scheduler: normal
steps: 20-30
cfg: 7.0
```

**이유:** 빠르고 안정적, 대부분의 경우 충분

---

#### Scenario 2: 고품질 이미지 생성

**노드:** KSampler  
**설정:**
```
sampler: DPM++ 2M Karras
scheduler: karras
steps: 30-50
cfg: 7.0-8.0
```

**이유:** 디테일 보존, 품질 우선

---

#### Scenario 3: 실험적 생성

**노드:** SamplerCustomAdvanced  
**설정:**
```
sigma_min: 0.05
sigma_max: 14.0
rho: 7.0
```

**이유:** 노이즈 범위 확장, 독특한 결과

---

#### Scenario 4: 논문 재현

**노드:** SamplerCustomAdvanced  
**설정:**
```
sigma input: 커스텀 시퀀스
(논문에 명시된 값 사용)
```

**이유:** 정확한 재현 필요

---

### ⚡ 성능 최적화 팁

**1. 스텝 수 최적화**

```
테스트: 20 steps
일반: 30 steps
고품질: 50 steps
오버킬: 100+ steps (비효율)
```

**2. Sampler 선택**

```
속도 우선: Euler
품질 우선: DPM++ 2M Karras
균형: Euler a
```

**3. Scheduler 선택**

```
일반: normal
고품질: karras
실험: exponential
```

---

## 🎓 학습 정리

### 꼭 기억해야 할 것

1. **KSampler**
   - 일반적인 이미지 생성
   - 간단한 설정
   - 사전 정의된 옵션

2. **SamplerCustomAdvanced**
   - 고급 제어
   - 세밀한 파라미터
   - 연구/실험용

3. **Sigma**
   - 노이즈 강도
   - 타임스텝별 제어
   - 커스텀 스케줄 가능

4. **선택 기준**
   - 일반 생성 → KSampler
   - 실험/연구 → Advanced
   - 품질 최우선 → DPM++ Karras

---

## 📚 다음 단계

**Sampler 이해 완료! 이제:**

1. [Sampler 알고리즘 비교](./sampler-comparison.md) - 각 샘플러 특징
2. [디노이징 프로세스](../../01-core-concepts/denoising-process.md) - 노이즈 제거 원리
3. [Flux 모델 가이드](../../02-models/flux/README.md) - 실전 적용

---

## 💡 복습 퀴즈

스스로 답해보세요:

1. KSampler와 SamplerCustomAdvanced의 주요 차이는?
2. Sigma가 의미하는 것은?
3. 일반적인 생성에는 어떤 샘플러를 사용하나요?
4. SamplerCustomAdvanced는 언제 사용하나요?

**답을 모르겠다면 해당 섹션을 다시 읽어보세요!**

---

**🎓 Sampler 비교 이해 완료!**

---

[🏠 홈으로](../../../README.md) | [📖 Sampler 비교](./sampler-comparison.md)
